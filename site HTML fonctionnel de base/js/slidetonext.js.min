(function(a){a.slidetonext=function(c,n){var k=c;k.init=function(){k.vars=a.extend({},a.slidetonext.defaults,n);k.data("slidetonext",k);k.bottomlayer=k.find(k.vars.background);k.toplayer=k.find(k.vars.cursor);k.state=0;k.isSliding=false;k.slidingwidth=k.vars.barwidth-60;k.slidingpercent=1000/(k.slidingwidth-10);k.cursorY=parseInt(k.toplayer.css("top").substring(0,k.toplayer.css("top").length-2),10);k.transitions="webkitTransition" in document.body.style;if(k.transitions){k.prop="-webkit-transform"}k.setTransition(0);k.toplayer.css({opacity:"0",display:"block",});a(k).each(function(){if("ontouchstart" in document.documentElement){this.addEventListener("touchstart",f,false)}});k.vars.start(k)};k.slideback=function(){k.vars.canceling(false);k.toplayer.bind("webkitTransitionEnd",function(p){a(this).unbind("webkitTransitionEnd")});k.toplayer.css({"-webkit-transition-duration":"0.5s","-webkit-transition-timing-function":"cubic-bezier(0.0, 0.0, 0.4, 1.0)","-webkit-transform":"translate3d(0,0,0)",opacity:"0"})};k.slideend=function(){a(k).each(function(){if("ontouchstart" in document.documentElement){this.removeEventListener("touchstart",f,false);this.removeEventListener("touchmove",b,false);this.removeEventListener("touchend",m,false)}});k.vars.canceling(true);k.toplayer.bind("webkitTransitionEnd",function(p){a(this).unbind("webkitTransitionEnd");k.vars.end()});k.toplayer.css({"-webkit-transition-duration":"0.3s","-webkit-transition-timing-function":"cubic-bezier(0.0, 0.0, 0.4, 1.0)","-webkit-transform":"translate3d("+k.slidingwidth+"px,0,0)",opacity:"0"})};var i,g,e,j,o,l,h=false;function f(p){if(k.isSliding){p.preventDefault()}else{if(p.touches.length==1){i=p.touches[0].pageX;g=p.touches[0].pageY;k.setTransition(0);k.toplayer.css({opacity:"1"});this.addEventListener("touchmove",b,false);this.addEventListener("touchend",m,false)}}}function b(p){o=p.touches[0].pageX-i;h=(Math.abs(o)<Math.abs(p.touches[0].pageY-g));if(!h&&o<=k.slidingwidth&&o>0){p.preventDefault();k.toplayer.css({"-webkit-transform":"translate3d("+o+"px,0,0)"});k.vars.moving(o*k.slidingpercent);if(o>(k.slidingwidth/2)){k.slideend()}}}function m(p){this.removeEventListener("touchmove",b,false);this.removeEventListener("touchend",m,false);k.slideback();i=null;g=null;o=null}function d(p){return parseInt(p.css("left").substring(0,p.css("left").length-2),10)}k.setTransition=function(p){k.toplayer.css({"-webkit-transition-duration":(p/1000)+"s"})};k.init()};a.slidetonext.defaults={cursor:"#slidetonextcursor",background:"#slidetonextbackground",animationDuration:600,barwidth:353,cursorwidth:133,padding:15,start:function(){},ready:function(){},before:function(){},after:function(){},moving:function(){},canceling:function(){},end:function(){}};a.fn.slidetonext=function(b){return this.each(function(){if(!a(this).data("slidetonext")){new a.slidetonext(a(this),b)}})}})(jQuery);